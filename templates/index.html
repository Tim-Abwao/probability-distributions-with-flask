<!DOCTYPE html>
<html>
<head>
	<title>Statistical Distributions with Python</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='style.css')}}">
</head>
<body style="background-image: url({{ url_for('static',filename='background.jpg') }}); ">
	<div class="content" style="margin-top: 5%;">
		{% if show_intro %}   <!-- Toggle introductory statement -->
			<h1>Statistical Distributions - Flask Demo</h1>
			<p>This is a simple web application to explore some useful <b>statistical distributions</b>, and showcase some of Python's packages (Flask, SciPy, Pandas, Matplotlib and Seaborn, among others).</p>
			<p>The idea is to enable anyone to get basic facts about the selected distributions, generate a random sample, view its shape and even download the data.</p>
			<p>To give it a try, please select a distribution:</p>
		{% endif %}

		<!-- Distribution selection -->
		<form action="{{ url_for('parameters')}}" method="post">
			<select name='chosen_dist'>
				{% for dist_name in range(tally) %}
					<option value="{{ distributions[dist_name] }}">{{ distributions[dist_name]}}</option>
				{% endfor %}
			</select>
			<input class="button" type="submit" >
		</form>
	</div>

	<div class="content">
		{% if chosen_distr %}
			<h3>{{ 'Current selection: '~ chosen_distr ~ ' Distribution'}}</h3>
			<!-- Displaying distribution information -->
			{% for info in dist_summary %}
				<p>{{ info }}</p>
			{% endfor %}
			<!-- Collecting parameter input-->
			{% if input_form %}
				<form action="{{ url_for('selection')}}" method="post">
					{% for i in range(num_params) %}
						{{ 'Parameter ' ~ (i+1) }}
						<input type="number" name="{{ 'parameter ' ~ (i+1) }}"  min="0" max="100000" step="0.001" required placeholder="{{ param_info[i] }}"><br>
					{% endfor %}
					Sample Size <input type="number" name="sample_size"  max="10000000" required><br>
					<input class="button" type="submit" value="Submit" >
				</form>
			{% endif %}

		{% endif %}

	</div>

	<div class="content">
		<!-- Displaying sample's graph and preview -->
		{% if graph %}
			<span>{{ 'Sample size: '~sample_size}} &emsp;</span><br>
				<!-- Display selected parameters -->
				{% for i in range(num_params) %}
					<span>{{ (param_info[i])~': '~(parameters[i]) }} &emsp;</span><br>
				{% endfor %}
			<br>
			<img src="{{ url_for('static', filename= 'files/'~graph )}}" style="width:100%; ">
			<br>
			<!-- Displaying sample's summary statistics -->
			{% for statistic in summary_stats %}
				<span>{{ statistic[0] ~ statistic[1] }}</span><br>
			{% endfor %}
			<!-- Displaying preview as a table -->	
			{% if preview %}
				<h4>A Preview of the above {{chosen_distr}} random sample.</h4>
				<table style="margin: auto;">
					<tr><th></th><th>X</th></tr>
					{% for i in preview %}
						<tr><td>{{ i[0] }}</td><td>{{ i[1] }}</td></tr>
						{% endfor %}
				</table>
			{% endif %}
			<br>
			<a href="{{ url_for('static', filename= 'files/'~sample_name) }}">Download Sample </a><br><br>
			<a href="{{ url_for('index') }} " >Back to home page</a>
		{% endif %}

	</div>
</body>
</html>